<!DOCTYPE html>
<html>
<head>
  <title>Fraud Detection Dashboard</title>
</head>
<body>

  <h2>Add Transaction</h2>
  <input type="number" id="account_id" placeholder="Account ID"><br><br>
  <input type="number" id="amount" placeholder="Amount"><br><br>
  <input type="text" id="device_id" placeholder="Device ID"><br><br>
  <button onclick="addTransaction()">Submit</button>

  <h2>Fraud Alerts</h2>
  <button onclick="loadAlerts()">Refresh Alerts</button>
  <ul id="alerts"></ul>

<script>
async function addTransaction() {
  const account_id = document.getElementById("account_id").value;
  const amount = document.getElementById("amount").value;
  const device_id = document.getElementById("device_id").value;

  const response = await fetch("http://localhost:5000/add-transaction", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ account_id, amount, device_id })
  });

  const data = await response.json();
  alert(data.message);
}

async function loadAlerts() {
  const response = await fetch("http://localhost:5000/alerts");
  const alerts = await response.json();

  const list = document.getElementById("alerts");
  list.innerHTML = "";

  alerts.forEach(alert => {
    const li = document.createElement("li");
    li.textContent = `Alert #${alert.alert_id} | Txn: ${alert.txn_id} | Rule: ${alert.rule_name} | Severity: ${alert.severity}`;
    list.appendChild(li);
  });
}
</script>

</body>
</html>